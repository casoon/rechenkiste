---
import type { Locale } from "@i18n/translations";
import { t } from "@i18n/translations";

interface Props {
    locale: Locale;
    correctAnswer: number | string;
    hint?: string;
    explanation?: string;
    nextUrl: string;
    isComplete: boolean;
}

const { locale, correctAnswer, hint, explanation, nextUrl, isComplete } =
    Astro.props;
---

<div class="feedback-incorrect bounce-in">
    <div class="text-4xl mb-2">ðŸ˜…</div>
    <p class="text-xl font-bold">{t(locale, "incorrect")}</p>
    <p class="mt-2 text-lg">
        {t(locale, "correctAnswerIs", { answer: correctAnswer })}
    </p>

    {
        hint && (
            <div class="mt-4 p-3 bg-yellow-100/80 rounded-lg text-left">
                <p class="text-sm text-yellow-800">
                    <span class="font-semibold">ðŸ’¡ {t(locale, "hint")}:</span>{" "}
                    {hint}
                </p>
            </div>
        )
    }

    {
        explanation && (
            <div class="mt-3 p-3 bg-blue-100/80 rounded-lg text-left">
                <p class="font-semibold text-blue-900 mb-1">
                    {t(locale, "solution")}:
                </p>
                <p class="text-sm text-blue-800 whitespace-pre-line">
                    {explanation}
                </p>
            </div>
        )
    }

    <div class="mt-6">
        <a href={nextUrl} class="btn-primary w-full inline-block text-center">
            {isComplete ? t(locale, "showResult") : t(locale, "nextTask")} â†’
        </a>
    </div>
</div>

<style>
    .feedback-incorrect {
        animation: shake 0.5s ease-in-out;
    }

    @keyframes shake {
        0%,
        100% {
            transform: translateX(0);
        }
        20%,
        60% {
            transform: translateX(-5px);
        }
        40%,
        80% {
            transform: translateX(5px);
        }
    }
</style>
